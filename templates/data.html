{% extends 'home-layout.html' %}
{%block body%}
<div class="jumbotron">
    <h3>Data</h3>
    <script>
        var baseurl = "https://covidtracking.com/api";
        function loadstates(){
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.open("GET", baseurl + "/states", true);
            xmlhttp.onreadystatechange = function() {
                if(xmlhttp.readyState === 4 && xmlhttp.status === 200){
                    var states = JSON.parse(xmlhttp.responseText);
                    var tbltop = '<table class="table" style="text-align:center;"><tr><th>ID</th><th>States</th><th>COVID Positive</th></tr>';
                    
                    var main = "";
                    for (i = 0; i < states.length; i++){
                        main += "<tr><td>" + i + "</td><td>" + states[i].state + "</td><td>" + states[i].positive + "</td></tr>";
                    }
                    var tblbottom = "</table>";
                    var tbl = tbltop + main + tblbottom;
                    document.getElementById("stateinfo").innerHTML = tbl;
                }
            };
            xmlhttp.send();
        }
        window.onload = function () {
            loadstates();
        }
    </script>
</div>
<div id = "stateinfo"></div>


{%endblock%}